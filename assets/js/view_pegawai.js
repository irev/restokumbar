$(document).ready(function(){		$("#container,#header,#toolbar").css({		'width':'200%'	});		$("#no_pegawai,#last_posisi,#last_nama").hide();	$("#cari").append(ListPencarian());	$("#tgl_lahir").datepicker({ 		dateFormat : "yy-mm-dd",		changeMonth: true,		changeYear: true	});		$("#form_submit").dialog({		autoOpen: false,		modal: true,		resizable: false,		width: 650,		show: {			effect: "blind",			duration: 500		},		hide: {			effect: "blind",			duration: 500		}	});		$("#refresh").click(function(){		window.location.href = url+'pegawai';	});		$("#tambah").click(function(){		Clear();		$("#tgl_register").val($(".tanggal").text());		$("#submit").val("Simpan");		$("#form_submit").dialog("open");	});		$("#cetak").click(function(){		 window.open(url+'pegawai/cetak', 'cetak', 'window settings');	});		$('.edit').click(function(){		var id = $(this).attr('id');		$.ajax({			url : url+'pegawai/Edit?id='+id,			type : 'json',			success: function(data){				var list  = eval(data);				Clear();				$("#posisi").val(list[0].posisi);				$("#no_pegawai").val(list[0].no_pegawai);				$("#last_posisi").val(list[0].posisi);				$("#nama_lengkap").val(list[0].nama_lengkap);				$("#last_nama").val(list[0].nama_lengkap);				$("#tgl_lahir").val(list[0].tgl_lahir);				$("#tgl_register").val(list[0].tgl_register);				$("#gender").val(list[0].gender);				$("#telp").val(list[0].telp);				$("#alamat").val(list[0].alamat);				$("#submit").val("Update");				$("#form_submit").dialog("open");			}		})	});		$(".hapus").click(function(event){		var id = $(this).attr('id');		$.ajax({			url : url+'pegawai/Delete?id='+id,			success: function(data){				$(event.target ).closest("tr").remove();			}		}) 	});		function ListPencarian(){		var hasil;		$.ajax({			url : url+'pegawai/ListPencarian',			async : false,			success : function(data){				hasil = data;			}		});		return hasil;	}		function Clear(){		$("#no_pegawai,#posisi").val('');		$("#last_posisi,#last_nama").val('');		$("#nama_lengkap").val('');		$("#tgl_lahir").val('');		$("#tgl_register").val('');		$("#gender").val('');		$("#telp").val('');		$("#alamat").val('');	}		$("#form_data").submit(function(){		var mode = $("#submit").val();		var last  = $("#last_posisi").val();		var now = $("#posisi").val();		var last_id = $("#no_pegawai").val();		var nama = $("#nama_lengkap").val();		var last_nama = $("#last_nama").val();		if(mode=='Simpan'){			save();		}else{			if(last==now&&nama==last_nama){				update();			}else{				do_delete(last_id);				do_save();			}		}		return false;	});		function do_delete(no_pegawai){		$.ajax({			url : url+'pegawai/Delete?id='+no_pegawai,			success: function(data){}		}) 	}		function do_save(){		$.ajax({			url : url+'pegawai/Save',			type : 'POST',			data : $("#form_data").serialize(),			success : function(data){				window.location.href = url+'pegawai';			}		});	}		function save(){		$.ajax({			url : url+'pegawai/Save',			type : 'POST',			data : $("#form_data").serialize(),			success : function(data){				window.location.href = url+'pegawai';			}		});	}		function update(){		$.ajax({			url : url+'pegawai/Update',			type : 'POST',			data : $("#form_data").serialize(),			success : function(data){				window.location.href = url+'pegawai';			}		});	}		function LoadPosisi(){		$.ajax({			url: url+'pegawai/Posisi',			success : function(data){				$("#posisi").append(data);			}		});	}	LoadPosisi();	});